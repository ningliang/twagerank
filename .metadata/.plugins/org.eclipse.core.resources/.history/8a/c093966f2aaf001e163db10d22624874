package twagerank;

import it.unimi.dsi.fastutil.ints.Int2DoubleOpenHashMap;
import logutils.Result;
import logutils.ResultHandler;

public class VectorInitializer implements ResultHandler {
	Int2DoubleOpenHashMap vector = new Int2DoubleOpenHashMap();
	Boolean normalized = false;

	// DURING work
	public void handleResult(Result result) { 
		if (result.isSuccessful()) vector.put(result.getId(), 1.0); 
	}	
	
	// AFTER work
	public Int2DoubleOpenHashMap getVector() {
		if (!normalized) {
			double size = (double)vector.size();
			for (int key : vector.keySet()) vector.put(key, vector.get(key) / size);
		}
		return this.vector; 
	}
}
